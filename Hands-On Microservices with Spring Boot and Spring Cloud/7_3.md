# 비동기 API와 이벤트 중심 비동기 서비스 중에서 선택

반응형 마이크로 서비스를 개발할 때 non-blocking synchronous API를 사용하는 시기와 이벤트 중심 비동기 서비스를 사용하는 시기가 항상 명확하지는 않습니다. 일반적으로 마이크로 서비스를 강력하고 확장 가능하게 만들려면 런타임 종속성을 최소화 하는 등 가능한 한 자율적으로 만드는 것이 중요합니다. 이것을 **느슨한 결합** 이라고도 합니다. 따라서 이벤트의 비동기 메시지 전달은 동기 API보다 선호됩니다. 이는 마이크로 서비스가 다른 많은 마이크로 서비스에 대한 동기 액세스에 의존하지 않고 런타임시 메시징 시스템에 대한 액세스에만 의존하기 때문입니다.

그러나 비 차단 동기 API를 사용하는 것이 유리한 경우가 많습니다 . 예를 들면 다음과 같습니다.

- 최종 사용자가 응답을 기다리는 읽기 작업
- 클라이언트 플랫폼이 모바일 API 또는 SPA 웹 애플리케이션과 같은 동기식 API 소비에 더 적합한 경우
- 클라이언트가 다른 조직의 서비스에 연결하는 위치 (일반적인 메시징 시스템을 통해 조직 전체에서 사용하기가 어려울 수 있음)

이 책에서 사용 된 시스템 환경을 위해 다음을 사용합니다.

- product composite 마이크로 서비스에 의해 노출되는 작성, 읽기 및 삭제 서비스는 동기식 API를 기반으로 합니다. 복합 마이크로 서비스는 웹 및 모바일 플랫폼 모두에서 클라이언트를 보유하고 있으며 시스템 환경을 운영하는 조직이 아닌 다른 조직에서 온 클라이언트를 가지고 있다고 가정합니다. 따라서 동기 API는 자연스럽게 일치하는 것처럼 보입니다.
- 코어 마이크로 서비스가 제공하는 읽기 서비스는 최종 사용자가 응답을 기다리고 있기 때문에 비 차단 동기 API 로 개발 될 것 입니다.
- 핵심 마이크로 서비스가 제공하는 생성 및 삭제 서비스는 이벤트 중심의 비동기 서비스로 개발 될 것입니다. 복합 마이크로 서비스가 집계된 제품 정보를 작성 및 삭제하기 위해 제공하는 동기식 API는 핵심 서비스가 수신한 주제에 대한 이벤트를 공개, 작성 및 삭제 한 후 200 (OK) 응답으로 리턴합니다.

이것은 다음 다이어그램으로 설명됩니다.

![https://static.packt-cdn.com/products/9781789613476/graphics/a8f1c5bd-e29b-4f4d-a527-a0f86fd863b1.png](https://static.packt-cdn.com/products/9781789613476/graphics/a8f1c5bd-e29b-4f4d-a527-a0f86fd863b1.png)

먼저, 비 블로킹 동기식 REST API를 개발하는 방법을 배우고, 이후 이벤트 중심 비동기 서비스를 개발하는 방법을 살펴 보겠습니다.